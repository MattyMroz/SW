#include"stm32l4xx_hal.h"#ifdefHAL_MODULE_ENABLED#defineSTM32L4XX_HAL_VERSION_MAIN(0x01U)#defineSTM32L4XX_HAL_VERSION_SUB1(0x0DU)#defineSTM32L4XX_HAL_VERSION_SUB2(0x05U)#defineSTM32L4XX_HAL_VERSION_RC(0x00U)#defineSTM32L4XX_HAL_VERSION((STM32L4XX_HAL_VERSION_MAIN<<24U)\|(STM32L4XX_HAL_VERSION_SUB1<<16U)\|(STM32L4XX_HAL_VERSION_SUB2<<8U)\|(STM32L4XX_HAL_VERSION_RC))#ifdefined(VREFBUF)#defineVREFBUF_TIMEOUT_VALUE10U#endif#defineSYSCFG_OFFSET(SYSCFG_BASE-PERIPH_BASE)#defineMEMRMP_OFFSETSYSCFG_OFFSET#defineFB_MODE_BitNumber8U#defineFB_MODE_BB(PERIPH_BB_BASE+(MEMRMP_OFFSET*32U)+(FB_MODE_BitNumber*4U))#defineSCSR_OFFSET(SYSCFG_OFFSET+0x18U)#defineBRER_BitNumber0U#defineSCSR_SRAM2ER_BB(PERIPH_BB_BASE+(SCSR_OFFSET*32U)+(BRER_BitNumber*4U))__IOuint32_tuwTick;uint32_tuwTickPrio=(1UL<<__NVIC_PRIO_BITS);HAL_TickFreqTypeDefuwTickFreq=HAL_TICK_FREQ_DEFAULT;HAL_StatusTypeDefHAL_Init(void){HAL_StatusTypeDefstatus=HAL_OK;#if(INSTRUCTION_CACHE_ENABLE==0)__HAL_FLASH_INSTRUCTION_CACHE_DISABLE();#endif#if(DATA_CACHE_ENABLE==0)__HAL_FLASH_DATA_CACHE_DISABLE();#endif#if(PREFETCH_ENABLE!=0)__HAL_FLASH_PREFETCH_BUFFER_ENABLE();#endifHAL_NVIC_SetPriorityGrouping(NVIC_PRIORITYGROUP_4);if(HAL_InitTick(TICK_INT_PRIORITY)!=HAL_OK){status=HAL_ERROR;}else{HAL_MspInit();}returnstatus;}HAL_StatusTypeDefHAL_DeInit(void){__HAL_RCC_APB1_FORCE_RESET();__HAL_RCC_APB1_RELEASE_RESET();__HAL_RCC_APB2_FORCE_RESET();__HAL_RCC_APB2_RELEASE_RESET();__HAL_RCC_AHB1_FORCE_RESET();__HAL_RCC_AHB1_RELEASE_RESET();__HAL_RCC_AHB2_FORCE_RESET();__HAL_RCC_AHB2_RELEASE_RESET();__HAL_RCC_AHB3_FORCE_RESET();__HAL_RCC_AHB3_RELEASE_RESET();HAL_MspDeInit();returnHAL_OK;}__weakvoidHAL_MspInit(void){}__weakvoidHAL_MspDeInit(void){}__weakHAL_StatusTypeDefHAL_InitTick(uint32_tTickPriority){HAL_StatusTypeDefstatus=HAL_OK;if((uint32_t)uwTickFreq!=0U){if(HAL_SYSTICK_Config(SystemCoreClock/(1000U/(uint32_t)uwTickFreq))==0U){if(TickPriority<(1UL<<__NVIC_PRIO_BITS)){HAL_NVIC_SetPriority(SysTick_IRQn,TickPriority,0U);uwTickPrio=TickPriority;}else{status=HAL_ERROR;}}else{status=HAL_ERROR;}}else{status=HAL_ERROR;}returnstatus;}__weakvoidHAL_IncTick(void){uwTick+=(uint32_t)uwTickFreq;}__weakuint32_tHAL_GetTick(void){returnuwTick;}uint32_tHAL_GetTickPrio(void){returnuwTickPrio;}HAL_StatusTypeDefHAL_SetTickFreq(HAL_TickFreqTypeDefFreq){HAL_StatusTypeDefstatus=HAL_OK;HAL_TickFreqTypeDefprevTickFreq;if(uwTickFreq!=Freq){prevTickFreq=uwTickFreq;uwTickFreq=Freq;status=HAL_InitTick(uwTickPrio);if(status!=HAL_OK){uwTickFreq=prevTickFreq;}}returnstatus;}HAL_TickFreqTypeDefHAL_GetTickFreq(void){returnuwTickFreq;}__weakvoidHAL_Delay(uint32_tDelay){uint32_ttickstart=HAL_GetTick();uint32_twait=Delay;if(wait<HAL_MAX_DELAY){wait+=(uint32_t)uwTickFreq;}while((HAL_GetTick()-tickstart)<wait){}}__weakvoidHAL_SuspendTick(void){SysTick->CTRL&=~SysTick_CTRL_TICKINT_Msk;}__weakvoidHAL_ResumeTick(void){SysTick->CTRL|=SysTick_CTRL_TICKINT_Msk;}uint32_tHAL_GetHalVersion(void){returnSTM32L4XX_HAL_VERSION;}uint32_tHAL_GetREVID(void){return((DBGMCU->IDCODE&DBGMCU_IDCODE_REV_ID)>>16);}uint32_tHAL_GetDEVID(void){return(DBGMCU->IDCODE&DBGMCU_IDCODE_DEV_ID);}uint32_tHAL_GetUIDw0(void){return(READ_REG(*((uint32_t*)UID_BASE)));}uint32_tHAL_GetUIDw1(void){return(READ_REG(*((uint32_t*)(UID_BASE+4U))));}uint32_tHAL_GetUIDw2(void){return(READ_REG(*((uint32_t*)(UID_BASE+8U))));}voidHAL_DBGMCU_EnableDBGSleepMode(void){SET_BIT(DBGMCU->CR,DBGMCU_CR_DBG_SLEEP);}voidHAL_DBGMCU_DisableDBGSleepMode(void){CLEAR_BIT(DBGMCU->CR,DBGMCU_CR_DBG_SLEEP);}voidHAL_DBGMCU_EnableDBGStopMode(void){SET_BIT(DBGMCU->CR,DBGMCU_CR_DBG_STOP);}voidHAL_DBGMCU_DisableDBGStopMode(void){CLEAR_BIT(DBGMCU->CR,DBGMCU_CR_DBG_STOP);}voidHAL_DBGMCU_EnableDBGStandbyMode(void){SET_BIT(DBGMCU->CR,DBGMCU_CR_DBG_STANDBY);}voidHAL_DBGMCU_DisableDBGStandbyMode(void){CLEAR_BIT(DBGMCU->CR,DBGMCU_CR_DBG_STANDBY);}voidHAL_SYSCFG_SRAM2Erase(void){SYSCFG->SKR=0xCA;SYSCFG->SKR=0x53;*(__IOuint32_t*)SCSR_SRAM2ER_BB=0x00000001UL;}voidHAL_SYSCFG_EnableMemorySwappingBank(void){*(__IOuint32_t*)FB_MODE_BB=0x00000001UL;}voidHAL_SYSCFG_DisableMemorySwappingBank(void){*(__IOuint32_t*)FB_MODE_BB=0x00000000UL;}#ifdefined(VREFBUF)voidHAL_SYSCFG_VREFBUF_VoltageScalingConfig(uint32_tVoltageScaling){assert_param(IS_SYSCFG_VREFBUF_VOLTAGE_SCALE(VoltageScaling));MODIFY_REG(VREFBUF->CSR,VREFBUF_CSR_VRS,VoltageScaling);}voidHAL_SYSCFG_VREFBUF_HighImpedanceConfig(uint32_tMode){assert_param(IS_SYSCFG_VREFBUF_HIGH_IMPEDANCE(Mode));MODIFY_REG(VREFBUF->CSR,VREFBUF_CSR_HIZ,Mode);}voidHAL_SYSCFG_VREFBUF_TrimmingConfig(uint32_tTrimmingValue){assert_param(IS_SYSCFG_VREFBUF_TRIMMING(TrimmingValue));MODIFY_REG(VREFBUF->CCR,VREFBUF_CCR_TRIM,TrimmingValue);}HAL_StatusTypeDefHAL_SYSCFG_EnableVREFBUF(void){uint32_ttickstart;SET_BIT(VREFBUF->CSR,VREFBUF_CSR_ENVR);tickstart=HAL_GetTick();while(READ_BIT(VREFBUF->CSR,VREFBUF_CSR_VRR)==0U){if((HAL_GetTick()-tickstart)>VREFBUF_TIMEOUT_VALUE){returnHAL_TIMEOUT;}}returnHAL_OK;}voidHAL_SYSCFG_DisableVREFBUF(void){CLEAR_BIT(VREFBUF->CSR,VREFBUF_CSR_ENVR);}#endifvoidHAL_SYSCFG_EnableIOAnalogSwitchBooster(void){SET_BIT(SYSCFG->CFGR1,SYSCFG_CFGR1_BOOSTEN);}voidHAL_SYSCFG_DisableIOAnalogSwitchBooster(void){CLEAR_BIT(SYSCFG->CFGR1,SYSCFG_CFGR1_BOOSTEN);}#endif