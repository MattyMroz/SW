#include"stm32l4xx_hal.h"#ifdefHAL_CORTEX_MODULE_ENABLEDvoidHAL_NVIC_SetPriorityGrouping(uint32_tPriorityGroup){assert_param(IS_NVIC_PRIORITY_GROUP(PriorityGroup));NVIC_SetPriorityGrouping(PriorityGroup);}voidHAL_NVIC_SetPriority(IRQn_TypeIRQn,uint32_tPreemptPriority,uint32_tSubPriority){uint32_tprioritygroup=0x00;assert_param(IS_NVIC_SUB_PRIORITY(SubPriority));assert_param(IS_NVIC_PREEMPTION_PRIORITY(PreemptPriority));prioritygroup=NVIC_GetPriorityGrouping();NVIC_SetPriority(IRQn,NVIC_EncodePriority(prioritygroup,PreemptPriority,SubPriority));}voidHAL_NVIC_EnableIRQ(IRQn_TypeIRQn){assert_param(IS_NVIC_DEVICE_IRQ(IRQn));NVIC_EnableIRQ(IRQn);}voidHAL_NVIC_DisableIRQ(IRQn_TypeIRQn){assert_param(IS_NVIC_DEVICE_IRQ(IRQn));NVIC_DisableIRQ(IRQn);}voidHAL_NVIC_SystemReset(void){NVIC_SystemReset();}uint32_tHAL_SYSTICK_Config(uint32_tTicksNumb){returnSysTick_Config(TicksNumb);}uint32_tHAL_NVIC_GetPriorityGrouping(void){returnNVIC_GetPriorityGrouping();}voidHAL_NVIC_GetPriority(IRQn_TypeIRQn,uint32_tPriorityGroup,uint32_t*pPreemptPriority,uint32_t*pSubPriority){assert_param(IS_NVIC_PRIORITY_GROUP(PriorityGroup));NVIC_DecodePriority(NVIC_GetPriority(IRQn),PriorityGroup,pPreemptPriority,pSubPriority);}voidHAL_NVIC_SetPendingIRQ(IRQn_TypeIRQn){assert_param(IS_NVIC_DEVICE_IRQ(IRQn));NVIC_SetPendingIRQ(IRQn);}uint32_tHAL_NVIC_GetPendingIRQ(IRQn_TypeIRQn){assert_param(IS_NVIC_DEVICE_IRQ(IRQn));returnNVIC_GetPendingIRQ(IRQn);}voidHAL_NVIC_ClearPendingIRQ(IRQn_TypeIRQn){assert_param(IS_NVIC_DEVICE_IRQ(IRQn));NVIC_ClearPendingIRQ(IRQn);}uint32_tHAL_NVIC_GetActive(IRQn_TypeIRQn){returnNVIC_GetActive(IRQn);}voidHAL_SYSTICK_CLKSourceConfig(uint32_tCLKSource){assert_param(IS_SYSTICK_CLK_SOURCE(CLKSource));if(CLKSource==SYSTICK_CLKSOURCE_HCLK){SysTick->CTRL|=SYSTICK_CLKSOURCE_HCLK;}else{SysTick->CTRL&=~SYSTICK_CLKSOURCE_HCLK;}}voidHAL_SYSTICK_IRQHandler(void){HAL_SYSTICK_Callback();}__weakvoidHAL_SYSTICK_Callback(void){}#if(__MPU_PRESENT==1)voidHAL_MPU_Enable(uint32_tMPU_Control){MPU->CTRL=(MPU_Control|MPU_CTRL_ENABLE_Msk);__DSB();__ISB();}voidHAL_MPU_Disable(void){__DMB();MPU->CTRL=0;}voidHAL_MPU_EnableRegion(uint32_tRegionNumber){assert_param(IS_MPU_REGION_NUMBER(RegionNumber));MPU->RNR=RegionNumber;SET_BIT(MPU->RASR,MPU_RASR_ENABLE_Msk);}voidHAL_MPU_DisableRegion(uint32_tRegionNumber){assert_param(IS_MPU_REGION_NUMBER(RegionNumber));MPU->RNR=RegionNumber;CLEAR_BIT(MPU->RASR,MPU_RASR_ENABLE_Msk);}voidHAL_MPU_ConfigRegion(MPU_Region_InitTypeDef*MPU_Init){assert_param(IS_MPU_REGION_NUMBER(MPU_Init->Number));assert_param(IS_MPU_REGION_ENABLE(MPU_Init->Enable));assert_param(IS_MPU_INSTRUCTION_ACCESS(MPU_Init->DisableExec));assert_param(IS_MPU_REGION_PERMISSION_ATTRIBUTE(MPU_Init->AccessPermission));assert_param(IS_MPU_TEX_LEVEL(MPU_Init->TypeExtField));assert_param(IS_MPU_ACCESS_SHAREABLE(MPU_Init->IsShareable));assert_param(IS_MPU_ACCESS_CACHEABLE(MPU_Init->IsCacheable));assert_param(IS_MPU_ACCESS_BUFFERABLE(MPU_Init->IsBufferable));assert_param(IS_MPU_SUB_REGION_DISABLE(MPU_Init->SubRegionDisable));assert_param(IS_MPU_REGION_SIZE(MPU_Init->Size));MPU->RNR=MPU_Init->Number;CLEAR_BIT(MPU->RASR,MPU_RASR_ENABLE_Msk);MPU->RBAR=MPU_Init->BaseAddress;MPU->RASR=((uint32_t)MPU_Init->DisableExec<<MPU_RASR_XN_Pos)|((uint32_t)MPU_Init->AccessPermission<<MPU_RASR_AP_Pos)|((uint32_t)MPU_Init->TypeExtField<<MPU_RASR_TEX_Pos)|((uint32_t)MPU_Init->IsShareable<<MPU_RASR_S_Pos)|((uint32_t)MPU_Init->IsCacheable<<MPU_RASR_C_Pos)|((uint32_t)MPU_Init->IsBufferable<<MPU_RASR_B_Pos)|((uint32_t)MPU_Init->SubRegionDisable<<MPU_RASR_SRD_Pos)|((uint32_t)MPU_Init->Size<<MPU_RASR_SIZE_Pos)|((uint32_t)MPU_Init->Enable<<MPU_RASR_ENABLE_Pos);}#endif#endif