#include"stm32l4xx_hal.h"#ifdefHAL_I2C_MODULE_ENABLEDHAL_StatusTypeDefHAL_I2CEx_ConfigAnalogFilter(I2C_HandleTypeDef*hi2c,uint32_tAnalogFilter){assert_param(IS_I2C_ALL_INSTANCE(hi2c->Instance));assert_param(IS_I2C_ANALOG_FILTER(AnalogFilter));if(hi2c->State==HAL_I2C_STATE_READY){__HAL_LOCK(hi2c);hi2c->State=HAL_I2C_STATE_BUSY;__HAL_I2C_DISABLE(hi2c);hi2c->Instance->CR1&=~(I2C_CR1_ANFOFF);hi2c->Instance->CR1|=AnalogFilter;__HAL_I2C_ENABLE(hi2c);hi2c->State=HAL_I2C_STATE_READY;__HAL_UNLOCK(hi2c);returnHAL_OK;}else{returnHAL_BUSY;}}HAL_StatusTypeDefHAL_I2CEx_ConfigDigitalFilter(I2C_HandleTypeDef*hi2c,uint32_tDigitalFilter){uint32_ttmpreg;assert_param(IS_I2C_ALL_INSTANCE(hi2c->Instance));assert_param(IS_I2C_DIGITAL_FILTER(DigitalFilter));if(hi2c->State==HAL_I2C_STATE_READY){__HAL_LOCK(hi2c);hi2c->State=HAL_I2C_STATE_BUSY;__HAL_I2C_DISABLE(hi2c);tmpreg=hi2c->Instance->CR1;tmpreg&=~(I2C_CR1_DNF);tmpreg|=DigitalFilter<<8U;hi2c->Instance->CR1=tmpreg;__HAL_I2C_ENABLE(hi2c);hi2c->State=HAL_I2C_STATE_READY;__HAL_UNLOCK(hi2c);returnHAL_OK;}else{returnHAL_BUSY;}}HAL_StatusTypeDefHAL_I2CEx_EnableWakeUp(I2C_HandleTypeDef*hi2c){assert_param(IS_I2C_WAKEUP_FROMSTOP_INSTANCE(hi2c->Instance));if(hi2c->State==HAL_I2C_STATE_READY){__HAL_LOCK(hi2c);hi2c->State=HAL_I2C_STATE_BUSY;__HAL_I2C_DISABLE(hi2c);hi2c->Instance->CR1|=I2C_CR1_WUPEN;__HAL_I2C_ENABLE(hi2c);hi2c->State=HAL_I2C_STATE_READY;__HAL_UNLOCK(hi2c);returnHAL_OK;}else{returnHAL_BUSY;}}HAL_StatusTypeDefHAL_I2CEx_DisableWakeUp(I2C_HandleTypeDef*hi2c){assert_param(IS_I2C_WAKEUP_FROMSTOP_INSTANCE(hi2c->Instance));if(hi2c->State==HAL_I2C_STATE_READY){__HAL_LOCK(hi2c);hi2c->State=HAL_I2C_STATE_BUSY;__HAL_I2C_DISABLE(hi2c);hi2c->Instance->CR1&=~(I2C_CR1_WUPEN);__HAL_I2C_ENABLE(hi2c);hi2c->State=HAL_I2C_STATE_READY;__HAL_UNLOCK(hi2c);returnHAL_OK;}else{returnHAL_BUSY;}}voidHAL_I2CEx_EnableFastModePlus(uint32_tConfigFastModePlus){assert_param(IS_I2C_FASTMODEPLUS(ConfigFastModePlus));__HAL_RCC_SYSCFG_CLK_ENABLE();SET_BIT(SYSCFG->CFGR1,(uint32_t)ConfigFastModePlus);}voidHAL_I2CEx_DisableFastModePlus(uint32_tConfigFastModePlus){assert_param(IS_I2C_FASTMODEPLUS(ConfigFastModePlus));__HAL_RCC_SYSCFG_CLK_ENABLE();CLEAR_BIT(SYSCFG->CFGR1,(uint32_t)ConfigFastModePlus);}#endif